{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nexport const useAsyncEffect = (callback, onDestroyOrDependencies = [], dependencies = []) => {\n  _s();\n  let deps;\n  let destroy;\n  if (typeof onDestroyOrDependencies === 'function') {\n    destroy = onDestroyOrDependencies;\n    deps = dependencies;\n  } else {\n    deps = onDestroyOrDependencies || [];\n  }\n  useEffect(() => {\n    let result;\n    let mounted = true;\n    const maybePromise = callback(() => {\n      return mounted;\n    });\n    Promise.resolve(maybePromise).then(value => {\n      result = value;\n    });\n    return () => {\n      mounted = false;\n      if (typeof destroy === 'function') {\n        destroy(result);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n};\n_s(useAsyncEffect, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["useEffect","useAsyncEffect","callback","onDestroyOrDependencies","dependencies","_s","deps","destroy","result","mounted","maybePromise","Promise","resolve","then","value"],"sources":["D:/messager/client/src/hooks/use-async-effect.ts"],"sourcesContent":["import { useEffect } from 'react'\r\n\r\nexport const useAsyncEffect = <Data = any>(\r\n  callback: (isMounted: () => boolean) => Data | Promise<Data>,\r\n  onDestroyOrDependencies: null | ((result?: Data) => void) | any[] = [],\r\n  dependencies: any[] = [],\r\n) => {\r\n  let deps: any[]\r\n  let destroy: (result?: Data) => void\r\n\r\n  if (typeof onDestroyOrDependencies === 'function') {\r\n    destroy = onDestroyOrDependencies\r\n    deps = dependencies\r\n  } else {\r\n    deps = onDestroyOrDependencies || []\r\n  }\r\n\r\n  useEffect(() => {\r\n    let result: Data\r\n    let mounted = true\r\n\r\n    const maybePromise = callback(() => {\r\n      return mounted\r\n    })\r\n\r\n    Promise.resolve(maybePromise).then((value) => {\r\n      result = value\r\n    })\r\n\r\n    return () => {\r\n      mounted = false\r\n\r\n      if (typeof destroy === 'function') {\r\n        destroy(result)\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, deps)\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,OAAO,MAAMC,cAAc,GAAGA,CAC5BC,QAA4D,EAC5DC,uBAAiE,GAAG,EAAE,EACtEC,YAAmB,GAAG,EAAE,KACrB;EAAAC,EAAA;EACH,IAAIC,IAAW;EACf,IAAIC,OAAgC;EAEpC,IAAI,OAAOJ,uBAAuB,KAAK,UAAU,EAAE;IACjDI,OAAO,GAAGJ,uBAAuB;IACjCG,IAAI,GAAGF,YAAY;EACrB,CAAC,MAAM;IACLE,IAAI,GAAGH,uBAAuB,IAAI,EAAE;EACtC;EAEAH,SAAS,CAAC,MAAM;IACd,IAAIQ,MAAY;IAChB,IAAIC,OAAO,GAAG,IAAI;IAElB,MAAMC,YAAY,GAAGR,QAAQ,CAAC,MAAM;MAClC,OAAOO,OAAO;IAChB,CAAC,CAAC;IAEFE,OAAO,CAACC,OAAO,CAACF,YAAY,CAAC,CAACG,IAAI,CAAEC,KAAK,IAAK;MAC5CN,MAAM,GAAGM,KAAK;IAChB,CAAC,CAAC;IAEF,OAAO,MAAM;MACXL,OAAO,GAAG,KAAK;MAEf,IAAI,OAAOF,OAAO,KAAK,UAAU,EAAE;QACjCA,OAAO,CAACC,MAAM,CAAC;MACjB;IACF,CAAC;IACD;EACF,CAAC,EAAEF,IAAI,CAAC;AACV,CAAC;AAAAD,EAAA,CApCYJ,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}